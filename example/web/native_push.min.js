let native_push_newNotificationCallback,native_push_initialNotification;async function native_push_initializeRemoteNotification(i){native_push_newNotificationCallback=i,await navigator.serviceWorker.register("/native_push_sw.js"),navigator.serviceWorker.onmessage=i=>{"native_push_newNotification"===i.data?.type&&native_push_newNotificationCallback&&native_push_newNotificationCallback(i.data?.data)};var t,i=window.location.href;i.includes("#")&&(t=4-(i=i.split("#")[1]).length%4,native_push_initialNotification=JSON.parse(atob(i.replace("-","+").replace("_","/").padEnd(i.length+(4==t?0:t),"="))))}function native_push_getInitialNotification(){return native_push_initialNotification}async function native_push_registerForRemoteNotification(i){return"granted"===await Notification.requestPermission()&&(i={endpoint:(i=(await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(i){var t=atob(i),a=new Uint8Array(t.length);for(let i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return a}(i)})).toJSON()).endpoint,p256dh:i.keys.p256dh,auth:i.keys.auth},window.localStorage.setItem("native_push_subscriptionEndpoint",JSON.stringify(i)),!0)}function native_push_getNotificationToken(){return window.localStorage.getItem("native_push_subscriptionEndpoint")}